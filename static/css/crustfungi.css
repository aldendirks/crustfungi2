/*==========================================
  CrustFungi.Com CSS
===========================================*/

/* ----------------------------------------*/
/* ------------- GLOBAL -------------------*/
/* ----------------------------------------*/

/*-------------------------
  Fonts
-------------------------*/
@font-face { font-family: "Peich"; src: url("fonts/peich/peich.otf"); }
@font-face { font-family: "Roboto-Regular"; src: url("fonts/roboto/roboto-regular.ttf"); }
@font-face { font-family: "Roboto-Bold"; src: url("fonts/roboto/roboto-bold.ttf"); }

/*-------------------------
  Aesthetics
-------------------------*/
:root {
  --container-max-width: 1000px;
  --body-background: white;
  --nav-background: #f4efe9;
  --nav-text: #414141;
  --nav-text-light: #787878;
  --nav-text-xlight: #f5f5f5;
  --nav-text-hover: white;
  --nav-hover-bg: #a49d58;
  --nav-border: #f4e2cb;
  --content-background: white;
  --content-h1: #675354;
  --content-h2: #606F6F;
  --content-h3: #B08552;
  --content-h4: #837c74;
  --link-color: #a49d58;
  --link-hover: #F7D7BB;
  --success: #6C765B;
  --warning: #FF8A8A;
}  

/* Dark mode */
html.dark-mode {
  --body-background: #121212;
  --nav-background: #1c1a18;
  --nav-text: #e2e2e2;
  --nav-text-light: #b3b3b3;
  --nav-text-xlight: #282828;
  --nav-text-hover: #121212;
  --nav-hover-bg: #a49d58;
  --nav-border: #3a342c;
  --content-background: #161616;
  --content-h1: #e6cfcf;
  --content-h2: #c9d6d6;
  --content-h3: #e0b97a;
  --content-h4: #b9b0a5;
  --link-color: #d6cf7a;
  --link-hover: #f7d7bb;
  --success: #ACC2AB;
  --warning: #750000;
}
html.dark-mode .nav-container img,
html.dark-mode .footer-container img,
html.dark-mode .taxonomy-container img,
html.dark-mode img[src="/static/images/species/default_species.png"] {
  filter: invert(100%);
}

html {
  scrollbar-color: var(--nav-border) var(--body-background);
  overflow-x: hidden; /* prevent horizontal scroll from 100vw elements */
}

.button-major {
  background: var(--nav-hover-bg);
  color: var(--body-background);
  border: none;
  border-radius: 6px;
  padding: 6px 12px;
  cursor: pointer;
  font-size: 0.8rem;
  line-height: 1.2;
  height: 32px;
  display: inline-flex;
  align-items: center;
}

.button-minor, 
input[type="file"]::file-selector-button {
  background-color: var(--nav-text-light);
  color: var(--body-background);
  border: none;
  border-radius: 6px;
  padding: 6px 12px;
  cursor: pointer;
  font-size: 0.8rem;
  line-height: 1.2;
  height: 32px;
  display: inline-flex;
  align-items: center;
}

input[type="file"]::file-selector-button {
  background-color: var(--nav-text-xlight);
  color: var(--nav-text);
}

.button-major:hover,
.button-minor:hover,
input[type="file"]::file-selector-button:hover {
    opacity: 0.8;
}

input[type="checkbox"],
input[type="radio"] {
  accent-color: var(--content-h3);
}

/* Visible focus for keyboard users when using tab */
:focus-visible {
  outline: 3px solid var(--nav-hover-bg);
  outline-offset: 2px;
}

/* Highlighted text */
::selection {
  background: var(--content-h2);  
  color: var(--body-background); 
}
::-moz-selection {
  background: var(--content-h2);
  color: var(--body-background);
}

/* Input placeholder text */
::placeholder {
  color: var(--nav-text-light);
  opacity: 0.7;
  font-style: italic;
}

/*-------------------------
  Spacing
-------------------------*/
* {
  box-sizing: border-box; /* include padding/border in element's total width/height */
  margin: 0;
  padding: 0;
}

html {
  height: 100%;
  overflow-y: scroll; /* keep scroll bar present to prevent layout shifts across pages */
}

body {
  min-height: 100vh; /* ensure body is at least full viewport height */
  display: flex;
  flex-direction: column;
  font-family: 'Roboto-Regular', Arial, sans-serif;
  background-color: var(--body-background);
  color: var(--nav-text);
  line-height: 1.6;
}

main {
  display: flex;
  flex: 1; /* push footer down if content is short, works with body {min-height: 100vh;} */
}

.nav-bounds {
  width: 100%;
}

.body-bounds, 
.footer-bounds { 
  max-width: var(--container-max-width); 
  width: 100%; 
  margin: 0 auto; /* center container */
}

/* If sidebar is present, remove centering and allow flexible width */
main.with-sidebar .body-bounds {  
  max-width: none;
  margin: 0;
}

.body-container { 
  background-color: var(--content-background);
  padding: 20px;
}

.two-column-layout {
  display: grid;
  grid-template-columns: 1.2fr 1.5fr;
  gap: 40px;
}

@media (max-width: 1020px) {
  .two-column-layout {
    display: flex;
    flex-direction: column;
    gap: 0;
  }
}

.footer-container {
  padding: 20px;
}

/*-------------------------
  Typography
-------------------------*/
h1 {
  color: var(--content-h1);
	margin: 30px 0 15px 0;
}

h2 {
  color: var(--content-h2);
  margin: 30px 0 15px 0;
}

@media (max-width: 768px) {
  .index h1,
  .intro h1,
  .keys h1,
  .glossary h1,
  .literature h1,
  .about h2,
  .terms h2,
  .tutorial h2,
  .contact h2 {
    margin-top: 0;
  }
}

h3 {
  color: var(--content-h3);
  margin: 20px 0 15px 0;
}

h4 {
  color: var(--content-h4);
  margin: 20px 0 15px 0;
}

a {
  color: var(--link-color);
  text-decoration: none;
}

a:hover {
  color: var(--link-hover);
}

p, ul, ol, blockquote {
  font-size: 1rem;
  margin-bottom: 15px;
}

form p {
  font-size: 0.9rem;
}

ul, ol {
  padding-left: 40px;
}

blockquote {
  border-left: 3px solid var(--content-h3);
  padding-left: 10px;
  margin-left: 25px;
}

strong {
  font-family: 'Roboto-Bold', Arial, sans-serif;
  font-weight: 900;
}

hr {
  border: 0;
  border-top: 1px solid var(--nav-border);
  margin-bottom: 15px;
}

.fig-description p {
  font-size: 0.8rem;
  margin-top: 10px;
}

.helper-text {
  color: var(--nav-text-light);
  font-size: 0.8rem;
}

.file-error {
  color: var(--body-background);
  background-color: var(--warning);
  border-radius: 6px;
  padding: 10px 12px;
  grid-column: span 2;
  font-size: 0.875rem;
  margin: 0;
  margin-bottom: 15px;
}

/*-------------------------
  Header
-------------------------*/
header {
  background-color: var(--nav-background);
  border-bottom: 5px solid var(--nav-border);
  font-family: 'Peich', Arial, sans-serif;
  display: flex;
  justify-content: center;
  position: relative; /* for positioning hamburger menu */
}

.nav-container {
  display: flex;
  align-items: center; /* vertically align logo and links despite different heights */
  gap: 25px;
  padding: 5px 20px;
}

.nav-logo img {
  width: 75px;
  margin-bottom: -10px;
}

.nav-links {
  display: flex;
}

.nav-links a {
  color: var(--nav-text);
  font-size: 1.25rem;
  padding: 8px 16px 0 16px;
  border-radius: 6px;
}

.nav-links a:hover {
  color: var(--nav-text-hover);
  background-color: var(--nav-hover-bg);
}

.login {
  margin-left: auto;
  margin-top: 24px;
  display: flex;
}

.login a {
  font-size: 1rem;
}

.site-search {
  display: flex;
  gap: 10px;
  align-items: center;
}

.site-search input {
  background: var(--body-background);
  padding: 6px 10px;
  border: 1px solid var(--nav-border);
  border-radius: 6px;
  font-size: 0.8rem;
  color: var(--nav-text);
}

.site-search input:focus {
  outline: 3px solid var(--nav-hover-bg);
}

.dark-mode-toggle {
  cursor: pointer;
  background: none;
  border: none;
  font-size: 1.4rem;
  padding: 6px;
  border-radius: 50%;
  transition: background 0.3s ease;
  color: var(--nav-text);
}

.dark-mode-icon::before {
  content: "⏾";
  opacity: 0.9;
}

html.dark-mode .dark-mode-icon::before {
  content: "☀︎";
}

.dark-mode-toggle:hover {
  background: #0000001A;
}

html.dark-mode .dark-mode-toggle:hover {
  background: #FFFFFF1A;
}

/*-------------------------
  Hamburger Menu
-------------------------*/
.hamburger {
  display: none;
  cursor: pointer;
  position: absolute;
  right: 20px;
  top: 25px;
  transform-origin: center;
}

.hamburger div {
  width: 36px;
  height: 5px;
  background-color: var(--nav-text);
  margin: 5px 0;
  transition: 0.3s ease;
}

/* .change toggled with JS function in base.js */
.hamburger.change .bar1 { transform: translateY(10px) rotate(-45deg); }
.hamburger.change .bar2 { opacity: 0; }
.hamburger.change .bar3 { transform: translateY(-10px) rotate(45deg); }

/*-------------------------
  Responsive Navigation
-------------------------*/
@media (max-width: 1300px) {
  .nav-links, 
  .login, 
  .site-search input, /* needs to be explicitly called for some reason */
  .site-search button, /* needs to be explicitly called for some reason */
  #navDarkModeToggle {  
    display: none;
  }

  .hamburger {
    display: block;
  }

  nav.responsive .nav-container {
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
  }

  nav.responsive .nav-links {
    display: flex;
    flex-direction: column;
    width: 100%;
    margin-top: -20px;
    gap: 0;
  }
  
  nav.responsive .login {
    display: flex;
    justify-content: center;
    margin: -20px 0;
    margin-left: 15px;
  }

  nav.responsive .site-search {
    display: flex;
    margin: -10px 0 20px 15px;
  }
  
  nav.responsive .site-search input,
  nav.responsive .site-search button {
    display: flex;
  }

  nav.responsive .nav-links,
  nav.responsive .login,
  nav.responsive .site-search {
    transform: translateY(0);
    animation: navFadeIn 0.5s ease;
  }
}

@keyframes navFadeIn {
  from { opacity: 0; transform: translateY(-24px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Do not allow logging in on mobile */
@media (max-width: 768px) {
  nav.responsive .login {
    display: none;
  }
}

/*-------------------------
  References
-------------------------*/
.references ol {
  padding: 0;
  margin: 0;
}

.references li {
  list-style-type: none;
} 

/*-------------------------
  Footer
-------------------------*/
footer {
  background-color: var(--nav-background);
  color: var(--nav-text);
  border-top: 5px solid var(--nav-border);
  text-align: center;
}

.footer-logo img {
  margin-bottom: -20px;
}

.footer-logo p {
  font-family: 'Peich', Arial, sans-serif;
  font-size: 2.6rem;
  margin: 0;
}

.footer-copy {
  margin-top: -20px;
  font-size: 0.8rem;
}

.footer-links {
  margin-top: -5px;
}

.footer-links a {
  color: var(--nav-text);
  margin: 0 7px;
  font-size: 0.9rem;
}

.footer-links a:hover {
  color: var(--nav-hover-bg);
}

.footer-tagline {
  margin-top: 6px;
  font-style: italic;
  font-size: 0.9rem;
}

.footer-social {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
}

.footer-social img {
  width: 32px;
}

.footer-social img:hover {
  opacity: 0.6;
}

#footerDarkModeToggle {
  display: none;
}

/* Display and fix spacing of differently positioned symbols */
@media (max-width: 1300px) {
  #footerDarkModeToggle {
    display: inline-block;
    margin-right: -5px;
    margin-top: -3px;
  }

  html.dark-mode #footerDarkModeToggle {
    display: inline-block;
    margin-right: -5px;
    margin-top: -7px;
  }
}

.footer-logo.shake {
  transform-origin: center;
  animation: shake 0.8s cubic-bezier(.36,.07,.19,.97);
}

@keyframes shake {
    0%   { transform: translate(0, 0) rotate(0deg); }
    20%  { transform: translate(-2px, 0) rotate(-5deg); }
    40%  { transform: translate(2px, 0) rotate(5deg); }
    60%  { transform: translate(-2px, 0) rotate(-5deg); }
    80%  { transform: translate(2px, 0) rotate(5deg); }
    100% { transform: translate(0, 0) rotate(0deg); }
}

/* ----------------------------------------*/
/* -------------- PAGES -------------------*/
/* ----------------------------------------*/

/*-------------------------
  Home
-------------------------*/

.index {
  opacity: 0; /* hide it originally */
  transition: opacity 0.3s ease-in;
}

.index.ready {
  opacity: 1; /* fade in with JS .ready class */
}

.hero {
  position: relative;
  width: 100vw;
  height: 500px;
  overflow: hidden;
  margin-top: -20px;
  margin-left: calc(-50vw + 50%);
}

.hero__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.hero__overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3));
}

@media (max-width: 768px) {
  .hero {
    height: 300px;
  }

  .index h1 {
    font-size: 1.5rem;
  }

  .index h2 {
    font-size: 1.3rem;
    margin-top: 10px;
  }
}

#homeCarousel {
  --f-carousel-gap: 20px;
  --f-carousel-slide-width: 60%;
  --f-carousel-slide-padding: 10px;
  --f-carousel-slide-bg: var(--body-background);
  --f-arrow-pos: 10px;
  --f-arrow-bg: rgba(255, 255, 255, 0.75);
  --f-arrow-hover-bg: rgba(255, 255, 255, 1);
  --f-arrow-color: #333;
  --f-arrow-width: 40px;
  --f-arrow-height: 40px;
  --f-arrow-svg-width: 20px;
  --f-arrow-svg-height: 20px;
  --f-arrow-svg-stroke-width: 2px;
  --f-arrow-border-radius: 50%;
}

#homeCarousel .f-carousel__slide {
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

#homeCarousel img {
  border-radius: 12px;
  width: 100%;
  max-width: 760px;
  height: auto;
}

#homeCarousel p {
  margin: 0;
  font-size: 1.2rem;
}

/* Hide carousel arrows on mobile */
@media (max-width: 768px) {
  #homeCarousel button {
    display: none;
  }
}

/*-------------------------
  Introduction
-------------------------*/
/* Add a little more spacing for introduction h3 headings */
.intro h3 {
  margin-top: 30px;
}

.intro-panels-container {
  display: flex;
  max-width: var(--container-max-width);
  gap: 20px;
  margin-top: 30px;
}

@media (max-width: 768px) {
  .intro-panels-container {
    flex-direction: column;
  }
}

.intro-panel {
  display: flex;
  flex-direction: column;
  align-items: center;
  max-width: 100%;
  background: var(--nav-background);
  border-radius: 15px;
  padding: 10px;
  gap: 10px;
}

.intro-panel img {
  border-radius: 15px;
  width: 100%;
}

.intro-panel p {
  margin: auto 0;
  color: var(--nav-hover-bg)
}

.intro .fig-description {
  margin-bottom: 30px;
}

/*-------------------------
  Species
-------------------------*/
.taxonomy-sidebar {
  width: 375px;
  flex-shrink: 0;
  flex-grow: 0;
  padding: 20px;
  position: sticky;
  top: 0;
  align-self: start;
}

.taxonomy-sidebar__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 7px 0;
}

.taxonomy-sidebar__header h3 {
  margin: 0;
}

.taxonomy-sidebar__header .clear-filters {
  margin-top: 16px;
}

.taxonomy-sidebar .facet {
  display: grid;
  grid-template-columns: 100px 1fr;
  margin-bottom: 10px;
}

.taxonomy-sidebar .facet:last-child {
  margin-bottom: 0;
}

.taxonomy-sidebar h4 {
  margin: 10px 0;
  font-size: 0.9rem;
}

.taxonomy-sidebar .facet-options {
  max-height: 115px;
  overflow-y: auto;
  margin: 0;
  padding: 6px 10px;
  list-style: none;
  border: 1px solid var(--nav-border);
  background-color: var(--nav-background);
  border-radius: 6px;
}

.taxonomy-sidebar li {
  line-height: 1.2;
  margin: 4px 0;
}

.taxonomy-sidebar a {
  text-decoration: none;
  display: inline-block;
  font-size: 0.9rem;
}

.taxonomy-sidebar .count {
  color: var(--nav-text-light);
  font-size: 0.8rem;
}

.is-updating {
  visibility: hidden;
}

/* Contains header and container */
.species-list {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 15px;
}

.species-list__header, 
.species-list__container {
  visibility: hidden; /* hide by default to prevent flashing, reveal with JS */
}

/* The width of this element is defined in a JS resize function in main.js */
.species-list__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: var(--nav-text-light);
}

.species-list__header #species-filter {
  margin: 0;
  font-size: 0.9rem;
}

.species-list__header .right-container {
  display: flex;
  align-items: center;
  gap: 24px;
  margin: 10px 0;
}

.species-list__header .right-container #new-profile {
  margin: 0;
  font-size: 0.9rem;
}

.species-list__header .right-container .image-size-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
}

.species-list__header .right-container .image-size-btn {
  background: none;
  border: 1px solid var(--nav-border);
  border-radius: 6px;
  color: var(--nav-text-light);
}

.species-list__header .right-container .image-size-btn:hover, 
.species-list__header .right-container .image-size-btn.active {
  background: var(--nav-hover-bg);
  color: var(--body-background);
}

@media (max-width: 768px) {
  .species-list__header .right-container .image-size-toggle {
    display: none;
  }

  .species-list__header #species-filter {
    margin: -20px 0 10px 0;
  }
}

/* The width of this is defined in a JS resize function in main.js */
.species-list__container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin: 0 auto;
}

.species-list {
  --species-img-size: 220px; /* default = small */
}

.species-list.large-images {
  --species-img-size: 460px;
}

.species-list-item {
  width: var(--species-img-size);
  display: flex;
  flex-direction: column;
  text-align: center;
}

.species-list-item img {
  width: var(--species-img-size);
  border-radius: 6px;
}

.species-list-item p {
  height: 50px;
  margin-bottom: 5px;
  font-size: 0.9rem;
}

.species-list-item img:hover {
  opacity: 0.8;
}

.sidebar-toggle {
  display: none;
}

@media (max-width: 960px) {
  main.with-sidebar {
    flex-direction: column;
  }

  .taxonomy-sidebar {
    position: static;
  }

  .taxonomy-sidebar .taxonomy-sidebar__header,
  .taxonomy-sidebar .facet,
  .species-list__header #new-profile {
    display: none;
  }

  .sidebar-toggle {
    display: flex;
    width: 100px;
    padding: 5px;
    background-color: var(--nav-background);
    border: 1px solid var(--nav-border);
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    justify-content: center;
    margin-bottom: -20px;
  }

  .sidebar-toggle:hover {
    opacity: 0.8;
  }

  .sidebar-toggle p {
    color: var(--nav-hover-bg);
    font-size: 0.9rem;
    margin: 0;
  }

  .taxonomy-sidebar.active .taxonomy-sidebar__header,
  .taxonomy-sidebar.active .facet {
    display: block;
  }

  .taxonomy-sidebar.active .sidebar-toggle {
    margin-bottom: 10px;
  }

  .species-list__header {
    max-width: 100%;
  }
}

/*-------------------------
  Species Profiles
-------------------------*/
.species-profile {
  opacity: 0; /* hide it originally */
  transition: opacity 0.3s ease-in;
}

.species-profile.ready {
  opacity: 1; /* fade in when JS applies the ready class */
}

.species-gallery {
  margin: 10px 0;
}

#speciesCarousel {
  display: flex;
  overflow: hidden;
  width: 100%;
  max-width: 960px;
  margin: 0 auto;
  --f-arrow-pos: 10px;
  --f-arrow-bg: rgba(255, 255, 255, 0.75);
  --f-arrow-hover-bg: rgba(255, 255, 255, 1);
  --f-arrow-color: #333;
  --f-arrow-width: 40px;
  --f-arrow-height: 40px;
  --f-arrow-svg-width: 20px;
  --f-arrow-svg-height: 20px;
  --f-arrow-svg-stroke-width: 2px;
  --f-arrow-border-radius: 50%;
}

#speciesCarousel .f-carousel__slide {
  flex: 0 0 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

#speciesCarousel img {
  width: 100%;
  max-width: 960px;
  height: auto;
  object-fit: contain;
}

#speciesCarousel figure {
  margin: 0;
  text-align: center;
}

.image-caption {
  font-size: 0.9rem;
  color: var(--nav-text-light);
}

.profile-header h1 {
  margin-top: 30px;
  margin-bottom: -35px;
}

.taxonomy {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-top: -20px;
  margin-bottom: 15px;
}

.taxonomy__list {
    margin: 0;
}

.taxonomy__icon {
    height: 22px;
    margin-top: 10px;
}

.taxonomy__icon:hover {
  opacity: 0.5;
}

.profile-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 40px;
}

.profile-footer p {
  font-size: 0.9rem;
}

@media (max-width: 768px) {
  .species-name {
    line-height: 1.2;
    margin: 40px 0 30px 0;
  }

  .taxonomy {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }

  .taxonomy__icons {
    margin-top: 0;
    gap: 10px;
  }

  .profile-footer {
    display: flex;
    flex-direction: column-reverse;
  }
  
  #edit-profile {
    display: none;
  }
}

/*-------------------------
  Keys
-------------------------*/
.keys-container {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 30px;
  margin-top: 30px;
}

.keys-toc {
  position: sticky;
  top: 20px;
  height: fit-content;
  max-height: calc(100vh - 80px);
  overflow-y: auto;
  padding-right: 12px;
  border-right: 2px solid var(--nav-border);
}

.toc-nav h3 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 1rem;
}

.toc-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.toc-list li {
  margin-bottom: 4px;
  line-height: 1.3;
}

.toc-link {
  font-size: 0.8rem;
  display: block;
  padding: 6px 8px;
  border-radius: 4px;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.toc-link:hover {
  background-color: var(--link-hover);
  color: var(--body-background);
}

.toc-link.active {
  background-color: var(--nav-hover-bg);
  color: var(--body-background);
}

.keys-content {
  min-width: 0;
}

.keys-content h3:first-of-type {
  margin-top: 0;
}

.key-section {
  margin-bottom: 35px;
  scroll-margin-top: 20px;
}

.key-section:last-child {
  margin-bottom: 0;
}

.couplets-list {
  font-size: 0.9rem;
}

.couplet-item {
  margin-bottom: 15px;
}

.choice {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.statement-container {
  position: relative;
  flex: 1 1 auto;
  min-width: 0;
}

.leader-dots {
  position: absolute;
  white-space: nowrap;
  pointer-events: none;
  color: var(--nav-text-light);
  overflow: hidden;
}

.destination {
  flex: 0 0 auto;
  align-self: flex-end;
  white-space: nowrap;
  display: inline;
}

.additional-info {
  display: inline;
  font-size: 0.9rem;
  margin-left: 4px;
}

.additional-info p {
  display: inline;
  font-size: 0.9rem;
  margin: 0;
}

@media (max-width: 768px) {
  .destination {
    flex: 1 1 auto;
    align-self: flex-start;
    text-align: right;
    white-space: normal;
  }
}

@media (max-width: 960px) {
  .keys-container {
    grid-template-columns: 1fr;
  }

  .keys-toc {
    display: none;
  }
}

/*-------------------------
  About
-------------------------*/
.about {
  margin-bottom: 20px;
}

.about h3 {
  margin-top: 30px;
}

.about .two-column-layout {
  margin-top: -15px;
  margin-bottom: -15px;
}

.about .figure img {
  max-width: 960px;
  width: 100%;
  border-radius: 6px;
  margin-top: 40px;
}

@media (max-width: 1020px) {
  .about .figure img {
    margin-top: 20px;
  }

  .about .fig-description {
    margin-bottom: 20px;
  }
}

/* ----------------------------------------*/
/* -------------- FORMS -------------------*/
/* ----------------------------------------*/

/*-------------------------
  General
-------------------------*/
form h3 {
  margin-top: 40px;
}

form input, 
form textarea,
form select {
  background: var(--body-background);
  border: 1px solid var(--nav-border);
  border-radius: 6px;
  padding: 6px 10px;
  font-size: 0.9rem;
  color: var(--nav-text);
}

form p:has(input) {
  display: grid;
  grid-template-columns: 150px 1fr;
  align-items: center;
}

form p:has(textarea) {
  display: flex;
  flex-direction: column;
}

form button[name="submit"],
form a.button-minor {
  display: inline-block;
  margin-right: 10px;
}

a.button-minor,
a.button-major {
  color: var(--body-background) !important;
}

a.button-minor:hover,
a.button-major:hover {
  color: var(--body-background) !important;
}

.tox-statusbar {
  display: none !important; /* hide TinyMCE status bar */
}

/*-------------------------
  User forms
-------------------------*/
.nonfield {
  display: none;
}

.login-form,
.registration-form {
  margin: 30px 0;
}

.registration-form ul {
  list-style-type: none;
  margin-left: -40px;
  color: var(--content-h3);
}

.registration-form p {
  display: block;
  margin-bottom: 30px;
}

.registration-form input {
  margin: 0 10px;
}

/*-------------------------
  Species Forms
-------------------------*/
/* Target first helper text paragraph only */
.species-form .helper-text #helper-text-intro {
  margin-bottom: -10px;
}

.tox-tinymce {
  margin-bottom: 20px;
}

.image-form .tox-tinymce {
  height: 140px !important;
}

.literature-scroll {
  max-height: 300px;
  overflow-y: auto;
  padding: 10px;
  border: 1px solid var(--nav-border);
  border-radius: 6px;
  background: var(--body-background);
  margin-bottom: 10px;
}

.literature-scroll label {
  display: grid;
  grid-template-columns: 18px 1fr;
  column-gap: 20px;
  align-items: start;
  font-size: 0.9rem;
  cursor: pointer;
  margin-bottom: 8px;
}

.literature-scroll input[type="checkbox"] {
  margin: 0;
  margin-top: 7px;
  width: 15px;
  height: 15px;
  cursor: pointer;
  color-scheme: light;
}

html.dark-mode .literature-scroll input[type="checkbox"] {
  color-scheme: dark;
}

#literature-modal {
  margin-bottom: 80px;
}

.literature-field-wrapper {
  display: grid;
  grid-template-columns: 100px 1fr;
  align-items: start;
  gap: 10px;
  margin-bottom: 10px;
}

.literature-field-wrapper .helper-text,
.literature-field-wrapper .errors {
  grid-column: 2;
  margin-top: -10px;
}

.form-images {
  margin-top: 60px;
}

/* Remove clear checkbox for thumbnail upload */
p:has(input[type="checkbox"]) input[type="checkbox"],
p:has(input[type="checkbox"]) br,
label[for="thumbnail-clear_id"] {
  display: none;
}

/* Make thumbnail input span full width when empty (no currently/change text) */
p:has(#id_thumbnail):not(:has(a)) input {
  grid-column: span 2;
}

#image-formset {
  list-style: none;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.image-formset-item {
  display: flex;
  flex-direction: row;
  gap: 8px;
  position: relative;
}

.image-form {
  background-color: var(--body-background);
  display: grid;
  grid-template-columns: 2fr 3fr;  
  gap: 30px;    
  padding: 15px;
  border: 2px solid var(--nav-border);
  border-radius: 6px;
  width: 100%;
}

.image-form img {
  display: block;
  align-self: center;
  max-width: 100%; 
  object-fit: cover;
  border-radius: 4px;
}

.image-form .tox-tinymce {
  margin: 0;
}

.field-wrapper p {
  display: grid;
  grid-template-columns: 110px 1fr;
  align-items: center;
  gap: 5px;
  margin-bottom: 10px;
}

.field-wrapper p:last-child {
  margin-bottom: 0;
}

.image-form br,
.image-form label[for$="-image"],
.image-form input[type="checkbox"][name$="-DELETE"], 
.image-form input[type="checkbox"][name$="-image-clear"],
.image-form input[type="checkbox"][name$="-image-clear"] + label {
  display: none;
}

.image-buttons {
  display: flex;
  flex-direction: column;
  gap: 4px;
  align-items: center;
  justify-content: center;
}

.image-buttons button svg {
  width: 16px;
  height: 16px;
  display: block;
  pointer-events: none;
}

.delete-image-btn {
  background-color: var(--warning);
  margin-bottom: 30px;
}

.delete-image-btn svg path {
  stroke: currentColor;
}

.delete-image-btn,
.move-up-btn,
.move-down-btn {
  border-radius: 50%;
  padding: 4px 8px;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1rem;
}

.move-up-btn:disabled,
.move-down-btn:disabled,
#add-image-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

#save-species-btn {
  margin: 50px 0 30px 0;
}

/*-------------------------
  Contact Form
-------------------------*/
.contact {
  max-width: 700px;
  margin: 0 auto;
  margin-bottom: 20px;
}

.contact-intro {
  margin-bottom: 30px;
}

.contact-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.contact-form .form-group {
  display: flex;
  flex-direction: column;
}

.contact-form .form-group label {
  margin-bottom: 8px;
  color: var(--content-h3);
}

.contact-form .form-control {
  padding: 10px 12px;
  border: 1px solid var(--nav-border);
  border-radius: 6px;
  font-size: 0.9rem;
  background-color: var(--body-background);
  color: var(--nav-text);
  transition: border-color 0.2s ease;
}

.contact-form .form-control:focus {
  outline: none;
  border-color: var(--link-color);
}

.form-errors {
  color: var(--warning);
  font-size: 0.8rem;
  margin-top: 5px;
}

.messages {
  margin-bottom: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.alert {
  padding: 12px 16px;
  border-radius: 6px;
  border-left: 4px solid;
}

.alert-success {
  background-color: rgba(76, 175, 80, 0.1);
  border-color: var(--success);
  color: var(--success);
}

.alert-error {
  background-color: rgba(244, 67, 54, 0.1);
  border-color: var(--warning);
  color: var(--warning);
}

.contact-form button[type="submit"] {
  align-self: flex-start;
  margin-top: 10px;
}
